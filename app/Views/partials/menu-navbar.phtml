<?php
// Navbar menu template
// Expected variables: $nav (array with navbar configuration)
$nav = $GLOBALS['nav'] ?? [];
$leftItems = $nav['left'] ?? [];
$leftDropdowns = $nav['leftDropdowns'] ?? [];
?>
<ul class="navbar-nav ms-auto">
  <?php foreach ($leftItems as $item): ?>
    <li class="nav-item">
      <a class="nav-link" href="<?php echo htmlspecialchars($item['href'] ?? '#'); ?>">
        <?php echo htmlspecialchars(\App\Core\I18n::t($item['label'] ?? '')); ?>
      </a>
    </li>
  <?php endforeach; ?>
  
  <?php foreach ($leftDropdowns as $index => $dropdown): ?>
    <li class="nav-item dropdown mobile-accordion">
      <a class="nav-link dropdown-toggle mobile-accordion-toggle" href="#" id="navDropdown<?php echo $index; ?>" role="button" data-bs-target="#mobileAccordion<?php echo $index; ?>" aria-expanded="false">
        <?php echo htmlspecialchars(\App\Core\I18n::t($dropdown['label'] ?? '')); ?>
      </a>
      <ul class="dropdown-menu mobile-accordion-content collapse" id="mobileAccordion<?php echo $index; ?>" aria-labelledby="navDropdown<?php echo $index; ?>">
        <?php foreach ($dropdown['items'] as $item): ?>
          <?php if (isset($item['divider']) && $item['divider']): ?>
            <li><hr class="dropdown-divider"></li>
          <?php else: ?>
            <li><a class="dropdown-item" href="<?php echo htmlspecialchars($item['href'] ?? '#'); ?>">
              <?php echo htmlspecialchars(\App\Core\I18n::t($item['label'] ?? '')); ?>
            </a></li>
          <?php endif; ?>
        <?php endforeach; ?>
      </ul>
    </li>
  <?php endforeach; ?>
</ul>
